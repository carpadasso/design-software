@startuml

skinparam componentStyle uml2
skinparam defaultFontName "Segoe UI, Arial"
skinparam linetype ortho
skinparam roundCorner 10

skinparam nodesep 120
skinparam ranksep 80

skinparam component {
    BackgroundColor<<Frontend>> #E3F2FD
    BorderColor<<Frontend>> #1565C0
    
    BackgroundColor<<Gateway>> #F3E5F5
    BorderColor<<Gateway>> #7B1FA2

    BackgroundColor<<Service>> #E8F5E9
    BorderColor<<Service>> #2E7D32

    BackgroundColor<<Database>> #FFF3E0
    BorderColor<<Database>> #EF6C00
}

title Arquitetura "Seu Cantinho" (Alinhamento Forçado)

package "Cliente" {
    [Frontend (Web App)] as AppCliente <<Frontend>>
}

package "Roteamento" {
    [API Gateway] as Gateway <<Gateway>>
}

package "Microsserviços (Backend)" {
    together {
        [Serviço de\nUsuários] as SvcUsuarios <<Service>>
        [Serviço de\nReservas] as SvcReservas <<Service>>
        [Serviço de\nEspaços] as SvcEspacos <<Service>>
        [Serviço de\nPagamentos] as SvcPagamentos <<Service>>
    }
}

package "Persistência (Dados)" {
    together {
        database "DB Usuários" as DBUsuarios <<Database>>
        database "DB Reservas" as DBReservas <<Database>>
        database "DB Espaços" as DBEspacos <<Database>>
        database "DB Pagamentos" as DBPagamentos <<Database>>
    }
}

AppCliente -[hidden]down- Gateway
Gateway -[hidden]down- SvcReservas
SvcReservas -[hidden]down- DBReservas

SvcUsuarios -[hidden]right- SvcReservas
SvcReservas -[hidden]right- SvcEspacos
SvcEspacos -[hidden]right- SvcPagamentos

DBUsuarios -[hidden]right- DBReservas
DBReservas -[hidden]right- DBEspacos
DBEspacos -[hidden]right- DBPagamentos



AppCliente --> Gateway

Gateway -down-> SvcUsuarios
Gateway -down-> SvcReservas
Gateway -down-> SvcEspacos
Gateway -down-> SvcPagamentos

SvcReservas -left-> SvcUsuarios : Valida

SvcReservas -right-> SvcEspacos : Consulta

SvcReservas -right-> SvcPagamentos : Cobrança

SvcPagamentos .up.> SvcReservas : Confirmação

SvcUsuarios -down-> DBUsuarios
SvcReservas -down-> DBReservas
SvcEspacos -down-> DBEspacos
SvcPagamentos -down-> DBPagamentos

@enduml